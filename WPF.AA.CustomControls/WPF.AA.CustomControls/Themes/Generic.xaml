<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WPF.AA.CustomControls"
    xmlns:converters="clr-namespace:WPF.AA.CustomControls.Converters">
    <!--<Style TargetType="{x:Type local:CustomControl1}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:CustomControl1}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>-->

    <Style TargetType="{x:Type local:WatermarkTextBox}">
        <Setter Property="Background" Value="#FFFFFFFF"/>
        <Setter Property="BorderBrush" Value="#FFABADB3"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="KeyboardNavigation.TabNavigation" Value="None"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="AllowDrop" Value="true"/>
        <Setter Property="ScrollViewer.PanningMode" Value="VerticalFirst"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="MinHeight" Value="18"/>
        <Setter Property="Padding" Value="0" />
        <Setter Property="WatermarkTemplate">
            <Setter.Value>
                <DataTemplate>
                    <ContentControl Content="{Binding}" Foreground="Gray" Focusable="False" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:WatermarkTextBox}">
                    <Border x:Name="border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" 
                            BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True">
                        <Grid>
                            <ScrollViewer x:Name="PART_ContentHost" Focusable="false" Margin="-1,0"
                                          HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden"/>
                            <ContentPresenter x:Name="watermark"
                                              Content="{TemplateBinding Watermark}"
                                              ContentTemplate="{TemplateBinding WatermarkTemplate}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              IsHitTestVisible="False"
                                              Margin="{TemplateBinding Padding}"
                                              Visibility="Collapsed" />
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="Text" Value="">
                            <Setter Property="Visibility" Value="Visible" TargetName="watermark" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Opacity" TargetName="border" Value="0.56" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="BorderBrush" TargetName="border" Value="#FF7EB4EA" />
                        </Trigger>
                        <Trigger Property="IsKeyboardFocused" Value="true">
                            <Setter Property="BorderBrush" TargetName="border" Value="#FF569DE5" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsInactiveSelectionHighlightEnabled" Value="true" />
                    <Condition Property="IsSelectionActive" Value="false" />
                </MultiTrigger.Conditions>
                <Setter Property="SelectionBrush" Value="#FFDCDCDC" />
            </MultiTrigger>
        </Style.Triggers>
    </Style>

    <converters:ZoomFactorConverter x:Key="ZoomFactorConverter" />

    <Style TargetType="{x:Type local:ZoomableListBox}">
        <Setter Property="Background" Value="#FFFFFFFF"/>
        <Setter Property="BorderBrush" Value="#FFABADB3"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
        <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:ZoomableListBox}">
                    <Border x:Name="Bd" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" 
                            BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="true">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <ScrollViewer Grid.Row="0" Focusable="False" Padding="{TemplateBinding Padding}" 
                                          CanContentScroll="{TemplateBinding ScrollViewer.CanContentScroll}">
                                <ItemsPresenter x:Name="PART_ItemsPresenter" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </ScrollViewer>
                            <Border Grid.Row="1" SnapsToDevicePixels="true" Height="1"
                                    Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" 
                                    BorderThickness="{TemplateBinding BorderThickness}" />
                            <Grid Grid.Row="2" Margin="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="1" Text="{TemplateBinding ZoomFactor, Converter={StaticResource ZoomFactorConverter}}" />
                                <Slider Grid.Column="2" Width="100" Margin="5,0" 
                                        Minimum="{TemplateBinding ZoomMin}" Maximum="{TemplateBinding ZoomMax}"
                                        Value="{Binding ZoomFactor, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" />
                                <Button x:Name="PART_ResetZoom" Grid.Column="3" Background="Transparent" BorderBrush="Transparent"
                                        ToolTip="Reset Zoom">
                                    <Button.Content>
                                        <Rectangle Width="16" Height="16">
                                            <Rectangle.Fill>
                                                <DrawingBrush>
                                                    <DrawingBrush.Drawing>
                                                        <DrawingGroup>
                                                            <DrawingGroup.Children>
                                                                <GeometryDrawing Brush="#00FFFFFF" Geometry="F1M16,16L0,16 0,0 16,0z" />
                                                                <GeometryDrawing Brush="#FFF6F6F6" Geometry="F1M16,10L8.949,10C8.974,10.164 9,10.328 9,10.5 9,12.43 7.43,14 5.5,14 5.179,14 4.86,13.954 4.551,13.863L2.414,16 1.586,16 0,14.414 0,13.586 2.137,11.449C2.046,11.139 2,10.822 2,10.5 2,10.328 2.026,10.164 2.051,10L0,10 0,0 16,0z" />
                                                                <GeometryDrawing Brush="#FF424242" Geometry="F1M3.957,3.3672C3.866,3.4152,3.763,3.4442,3.666,3.4842L3.666,4.2562C3.706,4.2432 3.747,4.2322 3.785,4.2172 3.857,4.1852 3.924,4.1522 3.988,4.1152 4.052,4.0802 4.107,4.0402 4.153,3.9992L4.153,7.0002 5,7.0002 5,3.0352 4.486,3.0352C4.329,3.1562,4.152,3.2672,3.957,3.3672 M12.071,5.0062C12.071,4.1092 11.887,3.6622 11.518,3.6622 11.123,3.6622 10.926,4.1232 10.926,5.0452 10.926,5.9142 11.119,6.3492 11.506,6.3492 11.883,6.3492 12.071,5.9002 12.071,5.0062 M13,4.9782C13,5.6312 12.869,6.1312 12.605,6.4782 12.344,6.8262 11.967,7.0002 11.477,7.0002 10.492,7.0002 10,6.3532 10,5.0662 10,4.3982 10.133,3.8892 10.399,3.5392 10.666,3.1892 11.052,3.0132 11.558,3.0132 12.519,3.0132 13,3.6682 13,4.9782 M8.071,4.9922C8.071,4.0962 7.887,3.6482 7.518,3.6482 7.123,3.6482 6.926,4.1092 6.926,5.0312 6.926,5.9002 7.119,6.3362 7.506,6.3362 7.883,6.3362 8.071,5.8872 8.071,4.9922 M9,4.9652C9,5.6172 8.869,6.1172 8.605,6.4652 8.344,6.8122 7.967,6.9862 7.477,6.9862 6.492,6.9862 6,6.3402 6,5.0532 6,4.3852 6.133,3.8762 6.399,3.5252 6.666,3.1762 7.052,3.0002 7.558,3.0002 8.519,3.0002 9,3.6542 9,4.9652 M15,1.0002L15,9.0002 8.649,9.0002C8.47,8.6262,8.234,8.2862,7.941,8.0002L14,8.0002 14,2.0002 2,2.0002 2,8.0002 3.059,8.0002C2.766,8.2862,2.53,8.6262,2.351,9.0002L1,9.0002 1,1.0002z" />
                                                                <GeometryDrawing Brush="#FF00539C" Geometry="F1M5.5,9C4.672,9 4,9.672 4,10.5 4,11.328 4.672,12 5.5,12 6.328,12 7,11.328 7,10.5 7,9.672 6.328,9 5.5,9 M8,10.5C8,11.881 6.881,13 5.5,13 5.067,13 4.667,12.881 4.313,12.688L2,15 1,14 3.312,11.688C3.12,11.332 3,10.932 3,10.5 3,9.119 4.119,8 5.5,8 6.881,8 8,9.119 8,10.5" />
                                                                <GeometryDrawing Brush="#FFF0EFF1" Geometry="F1M13,4.9785C13,3.6675 12.52,3.0135 11.558,3.0135 11.052,3.0135 10.666,3.1895 10.399,3.5395 10.133,3.8895 10,4.3985 10,5.0665 10,6.3535 10.492,6.9995 11.477,6.9995 11.967,6.9995 12.344,6.8265 12.605,6.4785 12.869,6.1305 13,5.6305 13,4.9785 M9,4.9645C9,3.6545 8.52,2.9995 7.558,2.9995 7.052,2.9995 6.666,3.1755 6.399,3.5255 6.133,3.8755 6,4.3845 6,5.0525 6,6.3395 6.492,6.9865 7.477,6.9865 7.967,6.9865 8.344,6.8125 8.605,6.4645 8.869,6.1175 9,5.6175 9,4.9645 M5,3.0355L4.486,3.0355C4.329,3.1565 4.152,3.2675 3.957,3.3675 3.866,3.4155 3.763,3.4445 3.666,3.4845L3.666,4.2555C3.706,4.2435 3.747,4.2325 3.785,4.2165 3.857,4.1855 3.924,4.1525 3.988,4.1155 4.052,4.0805 4.107,4.0405 4.153,3.9995L4.153,6.9995 5,6.9995z M14,1.9995L14,7.9995 7.942,7.9995C7.311,7.3835 6.45,6.9995 5.5,6.9995 4.55,6.9995 3.689,7.3835 3.058,7.9995L2,7.9995 2,1.9995z M7.518,3.6485C7.123,3.6485 6.926,4.1095 6.926,5.0315 6.926,5.9005 7.119,6.3355 7.506,6.3355 7.883,6.3355 8.071,5.8865 8.071,4.9925 8.071,4.0955 7.887,3.6485 7.518,3.6485 M11.518,3.6625C11.123,3.6625 10.926,4.1235 10.926,5.0445 10.926,5.9145 11.119,6.3495 11.506,6.3495 11.883,6.3495 12.071,5.9005 12.071,5.0055 12.071,4.1095 11.887,3.6625 11.518,3.6625 M7,10.4995C7,11.3285 6.328,11.9995 5.5,11.9995 4.672,11.9995 4,11.3285 4,10.4995 4,9.6715 4.672,8.9995 5.5,8.9995 6.328,8.9995 7,9.6715 7,10.4995" />
                                                            </DrawingGroup.Children>
                                                        </DrawingGroup>
                                                    </DrawingBrush.Drawing>
                                                </DrawingBrush>
                                            </Rectangle.Fill>
                                        </Rectangle>
                                    </Button.Content>
                                </Button>
                            </Grid>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Background" TargetName="Bd" Value="#FFFFFFFF"/>
                            <Setter Property="BorderBrush" TargetName="Bd" Value="#FFD9D9D9"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsGrouping" Value="true"/>
                                <Condition Property="VirtualizingPanel.IsVirtualizingWhenGrouping" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:RoundableButton}">
        <Setter Property="FocusVisualStyle" Value="{DynamicResource FocusVisual}"/>
        <Setter Property="Background" Value="#FFDDDDDD"/>
        <Setter Property="BorderBrush" Value="#FF707070"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:RoundableButton}">
                    <Border x:Name="border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" 
                            BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}"
                            SnapsToDevicePixels="true">
                        <ContentPresenter x:Name="contentPresenter" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                          Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsDefaulted" Value="True">
                            <Setter Property="BorderBrush" TargetName="border" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="border" Value="#FFBEE6FD"/>
                            <Setter Property="BorderBrush" TargetName="border" Value="#FF3C7FB1"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" TargetName="border" Value="#FFC4E5F6"/>
                            <Setter Property="BorderBrush" TargetName="border" Value="#FF2C628B"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Background" TargetName="border" Value="#FFF4F4F4"/>
                            <Setter Property="BorderBrush" TargetName="border" Value="#FFADB2B5"/>
                            <Setter Property="TextElement.Foreground" TargetName="contentPresenter" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:RoundableToggleButton}">
        <Setter Property="FocusVisualStyle" Value="{DynamicResource FocusVisual}"/>
        <Setter Property="Background" Value="#FFDDDDDD"/>
        <Setter Property="BorderBrush" Value="#FF707070"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:RoundableToggleButton}">
                    <Border x:Name="border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" 
                            BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}"
                            SnapsToDevicePixels="true">
                        <ContentPresenter x:Name="contentPresenter" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                          Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter Property="Background" TargetName="border" Value="#FF95B5C7" />
                            <Setter Property="BorderBrush" TargetName="border" Value="#FF2A5A80" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="border" Value="#FFBEE6FD"/>
                            <Setter Property="BorderBrush" TargetName="border" Value="#FF3C7FB1"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" TargetName="border" Value="#FFC4E5F6"/>
                            <Setter Property="BorderBrush" TargetName="border" Value="#FF2C628B"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Background" TargetName="border" Value="#FFF4F4F4"/>
                            <Setter Property="BorderBrush" TargetName="border" Value="#FFADB2B5"/>
                            <Setter Property="TextElement.Foreground" TargetName="contentPresenter" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <converters:EqualsConverter x:Key="EqualsConverter" />
    <converters:NotEqualsConverter x:Key="NotEqualsConverter" />

    <Style TargetType="{x:Type local:PopupExpander}">
        <Setter Property="Background" Value="#FFDDDDDD"/>
        <Setter Property="BorderBrush" Value="#FF707070"/>
        <Setter Property="BorderThickness" Value="0.5"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="Padding" Value="2,1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:PopupExpander}">
                    <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}"
                            SnapsToDevicePixels="True">
                        <Grid>
                            <local:RoundableToggleButton x:Name="HeaderSite" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                                         BorderThickness="{TemplateBinding BorderThickness}" ContentTemplate="{TemplateBinding HeaderTemplate}" 
                                                         Content="{TemplateBinding Header}" ContentTemplateSelector="{TemplateBinding HeaderTemplateSelector}" 
                                                         FontStretch="{TemplateBinding FontStretch}" Foreground="{TemplateBinding Foreground}" 
                                                         FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" 
                                                         FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" 
                                                         HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                         IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" 
                                                         Margin="0" MinWidth="0" MinHeight="0" Padding="{TemplateBinding Padding}"
                                                         VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                         CornerRadius="{TemplateBinding CornerRadius}" />
                            <Popup x:Name="ContentPopup" AllowDrop="True" AllowsTransparency="True" Placement="Bottom" 
                                   PlacementRectangle="{TemplateBinding PopupPlacementRectangle}"
                                   PlacementTarget="{Binding ElementName=HeaderSite}" StaysOpen="{TemplateBinding PopupStaysOpen}"
                                   HorizontalOffset="{TemplateBinding PopupHorizontalOffset}" VerticalOffset="{TemplateBinding PopupVerticalOffset}"
                                   IsOpen="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                <ContentPresenter x:Name="ExpandSite" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                            </Popup>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="ExpandDirection" Value="Right">
                            <Setter Property="Placement" TargetName="ContentPopup" Value="Left"/>
                        </Trigger>
                        <Trigger Property="ExpandDirection" Value="Up">
                            <Setter Property="Placement" TargetName="ContentPopup" Value="Top"/>
                        </Trigger>
                        <Trigger Property="ExpandDirection" Value="Left">
                            <Setter Property="Placement" TargetName="ContentPopup" Value="Right"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:GridSplitterPopupExpander}">
        <Setter Property="Background" Value="#FFDDDDDD"/>
        <Setter Property="BorderBrush" Value="#FF707070"/>
        <Setter Property="BorderThickness" Value="0.5"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="GridSplitterBackground" Value="#FF404040" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="Padding" Value="2,1" />
        <Setter Property="GridSplitterPreviewStyle">
            <Setter.Value>
                <Style TargetType="Control">
                    <Setter Property="Background" Value="Black" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="Control">
                                <Grid x:Name="Root" Opacity=".5">
                                    <Rectangle Fill="{TemplateBinding Background}" />
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:GridSplitterPopupExpander}">
                    <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}"
                            SnapsToDevicePixels="True">
                        <local:RoundableToggleButton x:Name="HeaderSite" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                                     BorderThickness="{TemplateBinding BorderThickness}" ContentTemplate="{TemplateBinding HeaderTemplate}" 
                                                     Content="{TemplateBinding Header}" ContentTemplateSelector="{TemplateBinding HeaderTemplateSelector}" 
                                                     FontStretch="{TemplateBinding FontStretch}" Foreground="{TemplateBinding Foreground}" 
                                                     FontStyle="{TemplateBinding FontStyle}" FontFamily="{TemplateBinding FontFamily}" 
                                                     FontWeight="{TemplateBinding FontWeight}" FontSize="{TemplateBinding FontSize}" 
                                                     HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                     IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" 
                                                     Margin="0" MinWidth="0" MinHeight="0" Padding="{TemplateBinding Padding}"
                                                     VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                     CornerRadius="{TemplateBinding CornerRadius}" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type local:NumericUpDown}">
        <Setter Property="Background" Value="#FFFFFFFF" />
        <Setter Property="BorderBrush" Value="#FF000000" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:NumericUpDown}">
                    <Border x:Name="border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}"
                            SnapsToDevicePixels="True">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <TextBox x:Name="PART_NumericDisplay" Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" 
                                     Background="{TemplateBinding Background}"
                                     Foreground="{TemplateBinding Foreground}" IsReadOnly="{TemplateBinding IsReadOnly}" />
                            <RepeatButton x:Name="PART_UpIncrement" Grid.Column="1" Grid.Row="0">
                                <Path x:Name="upPath" Fill="#FF000000" Data="M 0 4 L 8 4 L 4 0 Z" />
                            </RepeatButton>
                            <RepeatButton x:Name="PART_DownIncrement" Grid.Column="1" Grid.Row="1">
                                <Path x:Name="downPath" Fill="#FF000000" Data="M 0 0 L 4 4 L 8 0 Z" />
                            </RepeatButton>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="Background" TargetName="border" Value="{DynamicResource Button.MouseOver.Background}"/>
                            <Setter Property="BorderBrush" TargetName="border" Value="{DynamicResource Button.MouseOver.Border}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Background" TargetName="border" Value="{DynamicResource Button.Disabled.Background}"/>
                            <Setter Property="BorderBrush" TargetName="border" Value="{DynamicResource Button.Disabled.Border}"/>
                            <Setter Property="TextElement.Foreground" TargetName="PART_NumericDisplay" Value="{DynamicResource Button.Disabled.Foreground}"/>
                            <Setter Property="Fill" TargetName="upPath" Value="{DynamicResource Button.Disabled.Border}"/>
                            <Setter Property="Fill" TargetName="downPath" Value="{DynamicResource Button.Disabled.Border}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <converters:ThicknessConverter x:Key="ThicknessConverter" />

    <Style TargetType="{x:Type local:ShowHidePasswordBox}">
        <Setter Property="Background" Value="#FFFFFFFF" />
        <Setter Property="BorderBrush" Value="#FFABADB3" />
        <Setter Property="Foreground" Value="#FF000000" />
        <Setter Property="BorderThickness" Value="1,1,0,1" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="WatermarkTemplate">
            <Setter.Value>
                <DataTemplate>
                    <ContentControl Content="{Binding}" Foreground="Gray" Focusable="False" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:ShowHidePasswordBox}">
                    <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid x:Name="grid" SnapsToDevicePixels="True">
                            <TextBox x:Name="PART_TextBox" Padding="{TemplateBinding Padding}" Margin="0,0,23,0"
                                     Background="{TemplateBinding Background}" BorderBrush="Transparent"
                                     Text="{Binding Text, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}" 
                                     Foreground="{TemplateBinding Foreground}" />
                            <PasswordBox x:Name="PART_PasswordBox" Padding="{TemplateBinding Padding}" Margin="0,0,23,0" 
                                         Background="{TemplateBinding Background}" BorderBrush="Transparent" Foreground="{TemplateBinding Foreground}" />
                            <ContentPresenter x:Name="watermark" IsHitTestVisible="False"
                                              Content="{TemplateBinding Watermark}"
                                              ContentTemplate="{TemplateBinding WatermarkTemplate}"                                          
                                              Margin="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Padding, Converter={StaticResource ThicknessConverter},
                                                               ConverterParameter=L:+3|T:+1}"
                                              Visibility="Collapsed" />
                            <Button x:Name="PART_ShowTextButton" Background="{TemplateBinding Background}"
                                    BorderThickness="0" HorizontalAlignment="Right" VerticalAlignment="Stretch">
                                <Rectangle Width="20" Height="13" Margin="0,0,0,3">
                                    <Rectangle.Fill>
                                        <DrawingBrush>
                                            <DrawingBrush.Drawing>
                                                <DrawingGroup>
                                                    <DrawingGroup.Children>
                                                        <GeometryDrawing Brush="#00FFFFFF" Geometry="F1M128,95L0,95 0,0 128,0z" />
                                                        <GeometryDrawing Brush="#FF000000" Geometry="M565 764 c-11 -2 -45 -9 -75 -15 -128 -25 -308 -144 -370 -245 l-22 -35 42 -55 c72 -96 211 -184 345 -219 76 -19 221 -19 305 1 101 23 202 78 283 154 40 37 80 81 89 97 17 29 17 29 -27 84 -109 137 -281 224 -462 234 -48 2 -97 2 -108 -1z m158 -77 c90 -38 141 -117 141 -218 0 -53 -5 -74 -28 -113 -93 -159 -325 -148 -406 20 -32 65 -25 154 16 220 54 88 183 130 277 91z" />
                                                        <GeometryDrawing Brush="#FF000000" Geometry="M575 645 c-142 -50 -164 -245 -36 -326 117 -75 268 -1 279 137 l5 55 -34 -6 c-48 -9 -89 23 -89 70 0 19 5 37 10 40 18 11 11 23 -21 34 -41 14 -65 13 -114 -4z" />
                                                    </DrawingGroup.Children>
                                                </DrawingGroup>
                                            </DrawingBrush.Drawing>
                                        </DrawingBrush>
                                    </Rectangle.Fill>
                                </Rectangle>
                            </Button>
                            <Button x:Name="PART_HideTextButton" Background="{TemplateBinding Background}"
                                    BorderThickness="0" HorizontalAlignment="Right" VerticalAlignment="Stretch">
                                <Rectangle Width="20" Height="15" Margin="0,0,0,1">
                                    <Rectangle.Fill>
                                        <DrawingBrush>
                                            <DrawingBrush.Drawing>
                                                <DrawingGroup>
                                                    <DrawingGroup.Children>
                                                        <GeometryDrawing Brush="#00FFFFFF" Geometry="F1M128,95L0,95 0,0 128,0z" />
                                                        <GeometryDrawing Brush="#FF000000" Geometry="M615 490 c-388 -388 -389 -389 -370 -410 l19 -21 393 393 c369 369 391 393 376 410 -9 10 -19 18 -22 18 -3 0 -181 -175 -396 -390z" />
                                                        <GeometryDrawing Brush="#FF000000" Geometry="M545 764 c-137 -21 -255 -83 -362 -191 -46 -45 -83 -87 -83 -94 0 -36 115 -152 213 -214 l28 -18 50 49 50 50 -16 37 c-61 146 50 317 207 317 32 0 75 -7 95 -15 37 -16 37 -16 71 19 l35 34 -39 12 c-43 12 -202 21 -249 14z" />
                                                        <GeometryDrawing Brush="#FF000000" Geometry="M883 647 c-49 -50 -51 -53 -38 -77 55 -99 3 -247 -108 -307 -43 -23 -151 -23 -193 -1 -31 17 -31 17 -64 -17 -19 -19 -32 -36 -29 -38 15 -13 111 -27 186 -27 141 0 257 37 376 119 44 30 139 128 157 160 17 32 -95 152 -210 225 -26 15 -27 15 -77 -37z" />
                                                        <GeometryDrawing Brush="#FF000000" Geometry="M578 649 c-26 -10 -26 -11 -10 -38 13 -24 14 -33 3 -59 -16 -38 -60 -59 -90 -43 -18 10 -21 8 -27 -15 -7 -27 11 -104 24 -104 4 0 63 56 131 124 l124 124 -39 11 c-47 13 -80 13 -116 0z" />
                                                        <GeometryDrawing Brush="#FF000000" Geometry="M671 436 l-125 -125 30 -11 c16 -7 53 -10 82 -8 60 5 113 41 143 98 22 40 25 127 7 153 -12 15 -27 4 -137 -107z" />
                                                    </DrawingGroup.Children>
                                                </DrawingGroup>
                                            </DrawingBrush.Drawing>
                                        </DrawingBrush>
                                    </Rectangle.Fill>
                                </Rectangle>
                            </Button>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Opacity" TargetName="grid" Value="0.56"/>
                        </Trigger>
                        <Trigger Property="ShowPassword" Value="True">
                            <Setter Property="Visibility" Value="Collapsed" TargetName="PART_PasswordBox" />
                            <Setter Property="Visibility" Value="Visible" TargetName="PART_TextBox" />
                            <Setter Property="Visibility" Value="Collapsed" TargetName="PART_ShowTextButton" />
                            <Setter Property="Visibility" Value="Visible" TargetName="PART_HideTextButton" />
                        </Trigger>
                        <Trigger Property="ShowPassword" Value="False">
                            <Setter Property="Visibility" Value="Visible" TargetName="PART_PasswordBox" />
                            <Setter Property="Visibility" Value="Collapsed" TargetName="PART_TextBox" />
                            <Setter Property="Visibility" Value="Visible" TargetName="PART_ShowTextButton" />
                            <Setter Property="Visibility" Value="Collapsed" TargetName="PART_HideTextButton" />
                        </Trigger>
                        <Trigger Property="Text" Value="">
                            <Setter Property="Visibility" Value="Visible" TargetName="watermark" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="TrackRepeatButtonStyle" TargetType="{x:Type RepeatButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RepeatButton}">
                    <Border Background="Transparent" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    
    <Style TargetType="{x:Type local:ColorSlider}">
        <Setter Property="IsSelectionRangeEnabled" Value="False" />
        <Setter Property="LargeChange" Value="5" />
        <Setter Property="Maximum" Value="360" />
        <Setter Property="Minimum" Value="0" />
        <Setter Property="SmallChange" Value="1" />
        <Style.Triggers>
            <Trigger Property="Orientation" Value="Horizontal">
                <Setter Property="ThumbStyle">
                    <Setter.Value>
                        <Style TargetType="{x:Type Thumb}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type Thumb}">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>
                                            <Rectangle Grid.Row="0" Height="10" Width="10">
                                                <Rectangle.Fill>
                                                    <DrawingBrush>
                                                        <DrawingBrush.Drawing>
                                                            <DrawingGroup>
                                                                <DrawingGroup.Children>
                                                                    <GeometryDrawing Brush="#FF000000" Geometry="F1M0,0L10,0 5,10Z" />
                                                                </DrawingGroup.Children>
                                                            </DrawingGroup>
                                                        </DrawingBrush.Drawing>
                                                    </DrawingBrush>
                                                </Rectangle.Fill>
                                            </Rectangle>
                                            <Rectangle Grid.Row="2" Height="10" Width="10">
                                                <Rectangle.Fill>
                                                    <DrawingBrush>
                                                        <DrawingBrush.Drawing>
                                                            <DrawingGroup>
                                                                <DrawingGroup.Children>
                                                                    <GeometryDrawing Brush="#FF000000" Geometry="F1M5,0L0,10 10,10Z" />
                                                                </DrawingGroup.Children>
                                                            </DrawingGroup>
                                                        </DrawingBrush.Drawing>
                                                    </DrawingBrush>
                                                </Rectangle.Fill>
                                            </Rectangle>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Setter.Value>
                </Setter>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type local:ColorSlider}">
                            <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True" UseLayoutRounding="True"
                                    Padding="{TemplateBinding Padding}">
                                <Grid>
                                    <Border Margin="5,10">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FF0000" Offset="0" />
                                                    <GradientStop Color="#FFFF00" Offset="0.167" />
                                                    <GradientStop Color="#00FF00" Offset="0.333" />
                                                    <GradientStop Color="#00FFFF" Offset="0.5" />
                                                    <GradientStop Color="#0000FF" Offset="0.667" />
                                                    <GradientStop Color="#FF00FF" Offset="0.833" />
                                                    <GradientStop Color="#FF0000" Offset="1" />
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>
                                    <Track x:Name="PART_Track" Orientation="Horizontal" Margin="1,0">
                                        <Track.DecreaseRepeatButton>
                                            <RepeatButton Command="Slider.DecreaseLarge" Style="{StaticResource TrackRepeatButtonStyle}" />
                                        </Track.DecreaseRepeatButton>
                                        <Track.Thumb>
                                            <Thumb Style="{TemplateBinding ThumbStyle}" />
                                        </Track.Thumb>
                                        <Track.IncreaseRepeatButton>
                                            <RepeatButton Command="Slider.IncreaseLarge" Style="{StaticResource TrackRepeatButtonStyle}" />
                                        </Track.IncreaseRepeatButton>
                                    </Track>
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="Orientation" Value="Vertical">
                <Setter Property="ThumbStyle">
                    <Setter.Value>
                        <Style TargetType="{x:Type Thumb}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type Thumb}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <Rectangle Grid.Column="0" Height="10" Width="10">
                                                <Rectangle.Fill>
                                                    <DrawingBrush>
                                                        <DrawingBrush.Drawing>
                                                            <DrawingGroup>
                                                                <DrawingGroup.Children>
                                                                    <GeometryDrawing Brush="#FF000000" Geometry="F1M0,0L0,10 10,5Z" />
                                                                </DrawingGroup.Children>
                                                            </DrawingGroup>
                                                        </DrawingBrush.Drawing>
                                                    </DrawingBrush>
                                                </Rectangle.Fill>
                                            </Rectangle>
                                            <Rectangle Grid.Column="2" Height="10" Width="10">
                                                <Rectangle.Fill>
                                                    <DrawingBrush>
                                                        <DrawingBrush.Drawing>
                                                            <DrawingGroup>
                                                                <DrawingGroup.Children>
                                                                    <GeometryDrawing Brush="#FF000000" Geometry="F1M0,5L10,0 10,10Z" />
                                                                </DrawingGroup.Children>
                                                            </DrawingGroup>
                                                        </DrawingBrush.Drawing>
                                                    </DrawingBrush>
                                                </Rectangle.Fill>
                                            </Rectangle>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Setter.Value>
                </Setter>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type local:ColorSlider}">
                            <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}" SnapsToDevicePixels="True" UseLayoutRounding="True"
                                    Padding="{TemplateBinding Padding}">
                                <Grid>
                                    <Border Margin="10,5,10,5">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FF0000" Offset="0" />
                                                    <GradientStop Color="#FFFF00" Offset="0.167" />
                                                    <GradientStop Color="#00FF00" Offset="0.333" />
                                                    <GradientStop Color="#00FFFF" Offset="0.5" />
                                                    <GradientStop Color="#0000FF" Offset="0.667" />
                                                    <GradientStop Color="#FF00FF" Offset="0.833" />
                                                    <GradientStop Color="#FF0000" Offset="1" />
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>
                                    <Track x:Name="PART_Track" Orientation="Vertical" Margin="0,0,0,1">
                                        <Track.DecreaseRepeatButton>
                                            <RepeatButton Command="Slider.DecreaseLarge" Style="{StaticResource TrackRepeatButtonStyle}" />
                                        </Track.DecreaseRepeatButton>
                                        <Track.Thumb>
                                            <Thumb Style="{TemplateBinding ThumbStyle}" />
                                        </Track.Thumb>
                                        <Track.IncreaseRepeatButton>
                                            <RepeatButton Command="Slider.IncreaseLarge" Style="{StaticResource TrackRepeatButtonStyle}" />
                                        </Track.IncreaseRepeatButton>
                                    </Track>
                                </Grid>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
    </Style>

    <converters:ColorPickerBackgroundConverter x:Key="ColorConverter" />
    <converters:SolidColorBrushConverter x:Key="SolidColorBrushConverter" />

    <Style TargetType="{x:Type local:ColorPicker}">
        <Setter Property="Background" Value="#FFDDDDDD"/>
        <Setter Property="BorderBrush" Value="#FF707070"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="#FF000000"/>
        <Setter Property="MinHeight" Value="300" />
        <Setter Property="MinWidth" Value="250" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:ColorPicker}">
                    <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="{TemplateBinding CornerRadius}"
                            Padding="{TemplateBinding Padding}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="3*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Border x:Name="PART_ColorSquare" Background="#FF000000" Grid.Column="0" Margin="10,10,0,10" SnapsToDevicePixels="True" UseLayoutRounding="True">
                                    <Rectangle SnapsToDevicePixels="True" UseLayoutRounding="True"
                                               Height="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=ActualHeight}"
                                               Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=ActualWidth}"
                                               Fill="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=BaseColor, Converter={StaticResource ColorConverter}}">
                                        <Rectangle.OpacityMask>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                    <GradientStop Color="#00FFFFFF" Offset="1"/>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Rectangle.OpacityMask>
                                    </Rectangle>
                                </Border>
                                <Border Grid.Column="1" Margin="5">
                                    <local:ColorSlider x:Name="PART_ColorSlider" Orientation="Vertical" Minimum="0" Maximum="1000" SmallChange="1" LargeChange="5" Value="1000" 
                                                       SelectedColor="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=BaseColor, Mode=TwoWay}" />
                                </Border>
                                <Grid Grid.Column="2" Margin="0,25,10,25">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Row="0" Text="New" />
                                    <Border Grid.Row="1" BorderBrush="#FF000000" BorderThickness="1,1,1,0" SnapsToDevicePixels="True" UseLayoutRounding="True"
                                            Background="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SelectedColor, Converter={StaticResource SolidColorBrushConverter}}"/>
                                    <Border Grid.Row="2" BorderBrush="#FF000000" BorderThickness="1,0,1,1" SnapsToDevicePixels="True" UseLayoutRounding="True" 
                                            Background="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=PreviousColor, Converter={StaticResource SolidColorBrushConverter}}" />
                                    <TextBlock Grid.Row="3" Text="Current" />
                                </Grid>
                            </Grid>
                            <Grid Grid.Row="1" Margin="10,0,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <Border Grid.Column="0" Background="#FFFFFFFF" BorderThickness="1" Width="20" Height="20">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="#FF000000" />
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="#FFFFFFFF" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                </Border>
                                <Border Grid.Column="1" Background="#FF000000" BorderThickness="1" Width="20" Height="20" Margin="5,0,0,0">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="BorderBrush" Value="#FFFFFFFF" />
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="BorderBrush" Value="#FF000000" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                </Border>
                            </Grid>
                            <Grid Grid.Row="2" Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" MinWidth="27" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <TextBlock Grid.Column="0" Grid.Row="0" Text="R" />
                                <Slider Grid.Column="1" Grid.Row="0" Minimum="0" Maximum="255" Margin="5,0"
                                        Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SliderRValue, Mode=TwoWay}" />
                                <TextBox Grid.Column="2" Grid.Row="0" MaxLength="3"
                                         Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SliderRValue, UpdateSourceTrigger=PropertyChanged}" />
                                <TextBlock Grid.Column="0" Grid.Row="1" Text="G" Margin="0,5,0,0" />
                                <Slider Grid.Column="1" Grid.Row="1" Minimum="0" Maximum="255" Margin="5,5,5,0"
                                        Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SliderGValue, Mode=TwoWay}" />
                                <TextBox Grid.Column="2" Grid.Row="1" Margin="0,5,0,0" MaxLength="3"
                                         Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SliderGValue, UpdateSourceTrigger=PropertyChanged}" />
                                <TextBlock Grid.Column="0" Grid.Row="2" Text="B" Margin="0,5,0,0" />
                                <Slider Grid.Column="1" Grid.Row="2" Minimum="0" Maximum="255" Margin="5,5,5,0"
                                        Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SliderBValue, Mode=TwoWay}" />
                                <TextBox Grid.Column="2" Grid.Row="2" Margin="0,5,0,0" MaxLength="3"
                                         Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SliderBValue, UpdateSourceTrigger=PropertyChanged}" />
                                <TextBlock Grid.Column="0" Grid.Row="3" Text="A" Margin="0,5,0,0" />
                                <Slider Grid.Column="1" Grid.Row="3" Minimum="0" Maximum="255" Margin="5,5,5,0"
                                        Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SliderAValue, Mode=TwoWay}" />
                                <TextBox Grid.Column="2" Grid.Row="3" Margin="0,5,0,0" MaxLength="3"
                                         Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SliderAValue, UpdateSourceTrigger=PropertyChanged}" />
                            </Grid>
                            <Grid Grid.Row="3" Margin="0,0,10,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" MinWidth="60" />
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="1" MaxLength="9" Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=HexStringCode}" />
                            </Grid>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
